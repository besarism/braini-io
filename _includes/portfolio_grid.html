<!-- Portfolio Section -->
<section id="portfolio">
  <div class="container">
    <div class="section-header">
      <span class="section-label">Our Work</span>
      <h2>Projects</h2>
      <p>Selected work from our portfolio</p>
    </div>

    <div class="portfolio-grid">
      {% for project in site.portfolio %}
      <div class="project-card"
           data-project="p{{ forloop.index }}"
           data-info='{"title": "{{ project.title }}", "subtitle": "{{ project.subtitle }}", "image": "{{ project.image }}", "description": "{{ project.content | strip_html | strip_newlines | escape }}", "date": "{{ project.date_range | default: "" }}", "category": "{{ project.category | default: "" }}", "url": "{{ project.project_url | default: "" }}", "urlDisplay": "{{ project.url_display | default: "" }}"}'
           onclick="openModal('p{{ forloop.index }}')">
        <div class="project-image">
          <img src="{{ project.caption.thumbnail }}" alt="{{ project.alt | default: project.title }}">
          <div class="project-overlay">
            <span>View project <i class="fas fa-arrow-right"></i></span>
          </div>
        </div>
        <div class="project-content">
          <h3>{{ project.caption.title }}</h3>
          <p>{{ project.subtitle | truncate: 80 }}</p>
          <div class="project-tags">
            {% if project.tags %}
              {% for tag in project.tags %}
              <span class="project-tag">{{ tag }}</span>
              {% endfor %}
            {% else %}
              <span class="project-tag">{{ project.caption.subtitle }}</span>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Project Modal -->
<div class="modal-overlay" id="modal-overlay">
  <div class="modal-content" id="modal-content">
    <!-- Content injected via JavaScript -->
  </div>
</div>
